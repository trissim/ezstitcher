# EZStitcher Workflow Diagram

## Basic Workflow

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │     │                 │
│  Input Images   │────▶│  Auto-Detection │────▶│  Preprocessing  │────▶│    Stitching    │
│                 │     │                 │     │                 │     │                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘     └─────────────────┘
                                                                               │
                                                                               │
                                                                               ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │     │                 │
│  Output Images  │◀────│  Post-Processing│◀────│  Well Detection │◀────│ Position Finding│
│                 │     │                 │     │                 │     │                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘     └─────────────────┘
```

## Z-Stack Workflow

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│  Z-Stack Images │────▶│  Auto-Detection │────▶│  Z-Stack        │
│                 │     │                 │     │  Organization   │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                                                        │
                                                        │
                                                        ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│  Focus Detection│◀────│  Z-Projections  │◀────│  Preprocessing  │
│  (optional)     │     │  (optional)     │     │                 │
└─────────────────┘     └─────────────────┘     └─────────────────┘
        │                       │
        │                       │
        ▼                       ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│  Best Focus     │────▶│  Reference      │────▶│  Position       │
│  Selection      │     │  Image Selection│     │  Finding        │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                                                        │
                                                        │
                                                        ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│  Output Images  │◀────│  Stitching      │◀────│  Per-Plane      │
│                 │     │                 │     │  Stitching      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

## Class Diagram

```
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│                   │     │                   │     │                   │
│  PlateProcessor   │────▶│  ZStackProcessor  │────▶│  ZStackOrganizer  │
│                   │     │                   │     │                   │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                         │                         │
        │                         │                         │
        ▼                         ▼                         ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│                   │     │                   │     │                   │
│  ImagePreprocessor│     │  FocusAnalyzer    │     │  FilenameParser   │
│                   │     │                   │     │                   │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                         │                         │
        │                         │                         │
        ▼                         ▼                         ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│                   │     │                   │     │                   │
│  Stitcher         │     │  ImageLocator     │     │  DirectoryManager │
│                   │     │                   │     │                   │
└───────────────────┘     └───────────────────┘     └───────────────────┘
```

## Configuration Hierarchy

```
┌───────────────────┐
│                   │
│ PlateProcessorCfg │
│                   │
└───────────────────┘
        │
        ├─────────────┬─────────────┬─────────────┬─────────────┐
        │             │             │             │             │
        ▼             ▼             ▼             ▼             ▼
┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐ ┌───────────────┐
│               │ │               │ │               │ │               │ │               │
│ StitcherCfg   │ │ ZStackProcCfg │ │ FocusAnalCfg │ │ ImgPreprocCfg │ │ DirectoryCfg  │
│               │ │               │ │               │ │               │ │               │
└───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘ └───────────────┘
```
